---
title: 長文ナレッジのセクション分割によるEmbedding精度の向上
slug: untitled-24852699-13
tags:
  - MCP
created: 2025-08-07
---


## Context


Markdown形式のナレッジファイルが1ファイルあたり数千字を超える場合、Embeddingベクトル1件に圧縮すると情報がぼやけてしまう。内容の粒度に応じてセクション分割し、より精度の高い検索結果を得たい。


## Intent


長文.mdを自動的にセクション単位に分割し、それぞれを別ベクトルとして保存・検索可能にする方式を検討する。


## Knowledge

- Embedding APIは入力長によって精度に影響が出る（長すぎると意味が希薄化）
- Markdownは `##` や `###` によってセクション構造を持っているため、分割しやすい
- セクション単位でベクトル化すれば、よりピンポイントな検索が可能になる
- 検索結果では「該当セクションだけ表示」もできる

## Decision / Result


今後、1ファイルが一定の文字数を超えた場合に `##` 見出し単位で分割し、個別にEmbeddingして保存する方針を採用。より粒度の細かい意味検索を実現する。


