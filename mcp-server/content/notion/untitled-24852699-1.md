---
title: ESModulesとCommonJSの違いとMCPでの選定基準
slug: untitled-24852699-1
tags:
  - javascript
created: 2025-08-07
---


## Context


Node.jsやフロントエンドでモジュールを使う際に、ESMとCommonJSが混在しやすく、エラーやimport不能な事態が発生する。MCP構成でも統一が求められる。


## Intent


MCPの開発において、どちらのモジュール仕様を基準とするかを決め、設計を安定化させる。


## Knowledge

- CommonJS（`require`, `module.exports`）はNode.jsで長く使われた標準
- ESModules（`import`, `export`）はブラウザ対応とツールチェインの主流
- `type: "module"` を`package.json`に記載することでESMとして動作
- 混在はトラブルの原因（named import不可、default import問題など）

## Decision / Result


MCP構成では全体的に `ESModules` を標準とし、Nodeスクリプトも `type: "module"` 設定を前提に書く方針。CommonJSライブラリが必要な場合は限定的にラップを用意する。


