---
title: オブジェクトのコピー（参照と値）に関する理解と実装方針
slug: 24852699-3
tags:
  - javascript
created: 2025-08-20
---


## Context


状態管理やデータ加工において、JavaScriptのオブジェクトコピーが意図しないバグの原因になるケースが多い。浅いコピーと深いコピーの理解が重要。


## Intent


意図したとおりにオブジェクトを複製できるように、`shallow` / `deep` の違いをチーム内で明確にし、共通の実装方針を整える。


## Knowledge

- `Object.assign({}, obj)` や `{ ...obj }` はshallow copy（1階層のみ複製）
- `JSON.parse(JSON.stringify(obj))` は簡易的なdeep copy（関数やundefinedは失われる）
- lodashの `cloneDeep` は実用的だがやや重い
- ProxyやstructuredCloneなど、ES標準での選択肢もある

## Decision / Result


MCPでは浅いコピーにはスプレッド構文を、深いコピーが必要な場合は `structuredClone` を優先的に使用。互換性が必要な場面ではlodashの `cloneDeep` を許容。実装ポリシーに明記した。


