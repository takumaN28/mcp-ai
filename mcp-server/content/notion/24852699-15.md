---
title: 検索クエリにもEmbedding APIを使用しているか？
slug: 24852699-15
tags:
  - MCP
  - openAI
  - 検索
created: 2025-08-20
---


## Context


MCPサーバーでは、.md形式で管理されたナレッジを意味検索でユーザーに届ける仕組みを導入している。


この検索は、生成AI（OpenAIのEmbedding API）を活用しており、文書だけでなく検索クエリ側にも生成AIが必要かどうかを明確にしたいという議論があった。


---


## Intent


検索クエリにも生成AI（Embedding API）を使っているのかを明確にし、検索処理における生成AIの役割を正確に理解・記録すること。


---


## Knowledge

- `.md`ナレッジは事前にOpenAIのEmbedding APIを使用して意味ベクトル（1536次元）としてJSON化されている
- 検索時、ユーザーが自然言語で入力したクエリも同様にEmbedding APIでベクトル変換されている
- 類似度比較（cosine similarity）はローカルで実行されており、APIは使用しない
- よって、「検索時にも生成AIは使っている」が「比較処理自体は使っていない」

---


## Decision / Result


検索クエリも意味ベクトルに変換する必要があるため、**検索時にもOpenAIのEmbedding API（生成AI）を使用している**ことを確認。


検索ロジックそのもの（ベクトル比較・類似度ソート）はローカルで完結するが、検索における生成AIの役割は不可欠である。


